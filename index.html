<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>NEM Wallet</title>
</head>
<body>
  <h1>NEM Wallet</h1>

  <label>アドレス：</label>
  <input id="address" type="text" name="address" size="100" value="">
  <br><br>

  <button onclick="heartbeat();">ノード確認</button>
  <div id="node"></div>

  <button onclick="getAccount();">アカウント情報取得</button>
  <div id="account"></div>

  <button onclick="transfersAllAccount();">トランザクション情報取得</button>
  <div id="transaction"></div>

  <script>
    //********************************
    // /heartbeat
    //********************************
    function heartbeat() {
      const request = new XMLHttpRequest();
      request.open("GET", 'http://go.nem.ninja:7890/heartbeat');
      request.addEventListener("load", (event) => {
        const res = JSON.parse(event.target.responseText);
                
        target = document.getElementById("node");
        target.innerHTML = `
                           <p>ステータス：${res.message}</p>
                           `;
      });
      request.send();
    }
    //********************************
    // /account/get
    //********************************
    function getAccount() {
      address = document.getElementById("address").value;
      const request = new XMLHttpRequest();
      request.open("GET", `http://go.nem.ninja:7890/account/get?address=${address}`);
      request.addEventListener("load", (event) => {
        const res = JSON.parse(event.target.responseText);

        target = document.getElementById("account");
        target.innerHTML = `
                           <p>アカウント：${res.account.address}</p>
                           <p>残高：${parseFloat(res.account.balance) / 1000000}xem</p>
                           <p>重要度：${res.account.importance}</p>
                           `;
      });
      request.send();
    }

  </script>
</body>
</html>